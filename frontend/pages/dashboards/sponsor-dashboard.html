<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sponsor Dashboard - SponzoBD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Inter", sans-serif;
        overflow-x: hidden;
      }
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1a1a2e;
      }
      ::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, #7c3aed, #a855f7);
        border-radius: 10px;
      }
      .page-bg {
        background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #1a1a2e);
        background-size: 400% 400%;
        animation: gradientShift 15s ease infinite;
        min-height: 100vh;
      }
      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }
      .particles {
        position: fixed;
        width: 100%;
        height: 100%;
        overflow: hidden;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 0;
      }
      .particle {
        position: absolute;
        width: 6px;
        height: 6px;
        background: rgba(124, 58, 237, 0.4);
        border-radius: 50%;
        animation: floatParticle 20s infinite;
      }
      .particle:nth-child(1) {
        left: 15%;
        animation-delay: 0s;
        animation-duration: 22s;
      }
      .particle:nth-child(2) {
        left: 35%;
        animation-delay: 3s;
        animation-duration: 25s;
      }
      .particle:nth-child(3) {
        left: 55%;
        animation-delay: 1s;
        animation-duration: 20s;
      }
      .particle:nth-child(4) {
        left: 75%;
        animation-delay: 4s;
        animation-duration: 28s;
      }
      .particle:nth-child(5) {
        left: 90%;
        animation-delay: 2s;
        animation-duration: 18s;
      }
      @keyframes floatParticle {
        0% {
          transform: translateY(100vh) scale(0);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-100vh) scale(1);
          opacity: 0;
        }
      }
      .glass-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        transition: all 0.4s ease;
      }
      .glass-card:hover {
        border-color: rgba(124, 58, 237, 0.3);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      }
      .gradient-text {
        background: linear-gradient(
          135deg,
          #7c3aed 0%,
          #a855f7 50%,
          #ec4899 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .orb {
        position: fixed;
        border-radius: 50%;
        filter: blur(80px);
        opacity: 0.3;
        animation: orbFloat 8s ease-in-out infinite;
        pointer-events: none;
        z-index: 0;
      }
      .orb-1 {
        width: 350px;
        height: 350px;
        background: linear-gradient(135deg, #7c3aed, #a855f7);
        top: -100px;
        right: -100px;
      }
      .orb-2 {
        width: 280px;
        height: 280px;
        background: linear-gradient(135deg, #ec4899, #f97316);
        bottom: -80px;
        left: -80px;
        animation-delay: 2s;
      }
      @keyframes orbFloat {
        0%,
        100% {
          transform: translate(0, 0) scale(1);
        }
        50% {
          transform: translate(30px, 30px) scale(1.1);
        }
      }
      .stat-card {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        padding: 1.5rem;
        transition: all 0.4s ease;
      }
      .stat-card:hover {
        transform: translateY(-5px);
        border-color: rgba(124, 58, 237, 0.4);
        box-shadow: 0 15px 30px rgba(124, 58, 237, 0.15);
      }
      .stat-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
      }
      .request-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        padding: 1.25rem;
        transition: all 0.3s ease;
      }
      .request-card:hover {
        border-color: rgba(124, 58, 237, 0.3);
        background: rgba(255, 255, 255, 0.05);
      }
      .status-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 500;
      }
      .status-pending {
        background: rgba(251, 191, 36, 0.2);
        color: #fbbf24;
        border: 1px solid rgba(251, 191, 36, 0.3);
      }
      .status-approved {
        background: rgba(34, 197, 94, 0.2);
        color: #22c55e;
        border: 1px solid rgba(34, 197, 94, 0.3);
      }
      .status-rejected {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
        border: 1px solid rgba(239, 68, 68, 0.3);
      }
      .font-space {
        font-family: "Space Grotesk", sans-serif;
      }
    </style>
  </head>
  <body class="page-bg">
    <div class="particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div id="navbar"></div>

    <main
      class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-28"
    >
      <!-- Welcome Section -->
      <div class="glass-card p-8 mb-8" data-aos="fade-up">
        <div
          class="flex flex-col md:flex-row md:items-center md:justify-between"
        >
          <div>
            <span
              class="inline-block px-4 py-2 rounded-full bg-purple-500/10 border border-purple-500/20 text-purple-300 text-sm font-medium mb-4"
            >
              <i class="fas fa-building mr-2"></i>Sponsor Dashboard
            </span>
            <h1
              class="text-3xl md:text-4xl font-bold text-white mb-2 font-space"
            >
              Welcome,
              <span class="gradient-text" id="companyName">Sponsor</span>
            </h1>
            <p class="text-gray-400 text-lg">
              Manage your sponsorships, view requests, and track your impact.
            </p>
          </div>
        </div>
      </div>

      <!-- Stats Cards -->
      <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8">
        <div class="stat-card" data-aos="fade-up" data-aos-delay="100">
          <div class="flex items-center gap-4">
            <div
              class="stat-icon bg-gradient-to-br from-purple-600 to-purple-700 text-white"
            >
              <i class="fas fa-handshake"></i>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Active Sponsorships</p>
              <p
                class="text-3xl font-bold gradient-text font-space"
                id="activeCount"
              >
                0
              </p>
            </div>
          </div>
        </div>

        <div class="stat-card" data-aos="fade-up" data-aos-delay="200">
          <div class="flex items-center gap-4">
            <div
              class="stat-icon bg-gradient-to-br from-yellow-500 to-orange-500 text-white"
            >
              <i class="fas fa-clock"></i>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Pending Requests</p>
              <p
                class="text-3xl font-bold gradient-text font-space"
                id="pendingCount"
              >
                0
              </p>
            </div>
          </div>
        </div>

        <div class="stat-card" data-aos="fade-up" data-aos-delay="300">
          <div class="flex items-center gap-4">
            <div
              class="stat-icon bg-gradient-to-br from-green-500 to-emerald-500 text-white"
            >
              <i class="fas fa-check-circle"></i>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Total Approved</p>
              <p
                class="text-3xl font-bold gradient-text font-space"
                id="approvedCount"
              >
                0
              </p>
            </div>
          </div>
        </div>

        <div class="stat-card" data-aos="fade-up" data-aos-delay="400">
          <div class="flex items-center gap-4">
            <div
              class="stat-icon bg-gradient-to-br from-pink-600 to-rose-600 text-white"
            >
              <i class="fas fa-coins"></i>
            </div>
            <div>
              <p class="text-sm text-gray-400 mb-1">Total Invested</p>
              <p
                class="text-3xl font-bold gradient-text font-space"
                id="totalInvested"
              >
                ৳0
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Two Column Layout -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Sponsorship Requests -->
        <div
          class="glass-card p-6 lg:p-8"
          data-aos="fade-up"
          data-aos-delay="500"
        >
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
              <div
                class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-600 to-violet-600 flex items-center justify-center"
              >
                <i class="fas fa-inbox text-white"></i>
              </div>
              <h2 class="text-xl font-semibold text-white font-space">
                Sponsorship Requests
              </h2>
            </div>
            <span class="text-sm text-gray-400" id="requestsCount"
              >0 requests</span
            >
          </div>

          <div id="requestsList" class="space-y-4">
            <!-- Empty state -->
            <div
              id="emptyRequests"
              class="bg-white/5 rounded-xl p-6 border border-white/10"
            >
              <div class="flex flex-col items-center justify-center py-8">
                <i class="fas fa-inbox text-4xl text-gray-600 mb-4"></i>
                <p class="text-gray-400 text-lg text-center">
                  No sponsorship requests yet.
                </p>
                <p class="text-gray-500 text-sm mt-2 text-center">
                  When sponsees request your sponsorship, they'll appear here.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div
          class="glass-card p-6 lg:p-8"
          data-aos="fade-up"
          data-aos-delay="600"
        >
          <div class="flex items-center gap-3 mb-6">
            <div
              class="w-10 h-10 rounded-xl bg-gradient-to-br from-pink-600 to-orange-600 flex items-center justify-center"
            >
              <i class="fas fa-history text-white"></i>
            </div>
            <h2 class="text-xl font-semibold text-white font-space">
              Recent Activity
            </h2>
          </div>

          <div id="activityList" class="space-y-4">
            <!-- Empty state -->
            <div
              id="emptyActivity"
              class="bg-white/5 rounded-xl p-6 border border-white/10"
            >
              <div class="flex flex-col items-center justify-center py-8">
                <i class="fas fa-chart-line text-4xl text-gray-600 mb-4"></i>
                <p class="text-gray-400 text-lg text-center">
                  No recent activity.
                </p>
                <p class="text-gray-500 text-sm mt-2 text-center">
                  Your sponsorship activities will be tracked here.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div
        class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6"
        data-aos="fade-up"
        data-aos-delay="700"
      >
        <a
          href="../events/sponsee.html"
          class="glass-card p-6 flex items-center gap-4 hover:border-purple-500/50 transition group"
        >
          <div
            class="w-14 h-14 rounded-xl bg-gradient-to-br from-purple-600/20 to-violet-600/20 flex items-center justify-center border border-purple-500/30 group-hover:border-purple-500/60 transition"
          >
            <i class="fas fa-calendar-alt text-2xl text-purple-400"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-white mb-1">Browse Events</h3>
            <p class="text-sm text-gray-400">Find events to sponsor</p>
          </div>
          <i
            class="fas fa-arrow-right ml-auto text-gray-500 group-hover:text-purple-400 transition"
          ></i>
        </a>

        <a
          href="../profiles/sponsor-profile.html"
          class="glass-card p-6 flex items-center gap-4 hover:border-pink-500/50 transition group"
        >
          <div
            class="w-14 h-14 rounded-xl bg-gradient-to-br from-pink-600/20 to-orange-600/20 flex items-center justify-center border border-pink-500/30 group-hover:border-pink-500/60 transition"
          >
            <i class="fas fa-user-circle text-2xl text-pink-400"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-white mb-1">
              Complete Profile
            </h3>
            <p class="text-sm text-gray-400">Attract quality sponsees</p>
          </div>
          <i
            class="fas fa-arrow-right ml-auto text-gray-500 group-hover:text-pink-400 transition"
          ></i>
        </a>

        <a
          href="#"
          onclick="viewAnalytics(); return false;"
          class="glass-card p-6 flex items-center gap-4 hover:border-green-500/50 transition group"
        >
          <div
            class="w-14 h-14 rounded-xl bg-gradient-to-br from-green-600/20 to-emerald-600/20 flex items-center justify-center border border-green-500/30 group-hover:border-green-500/60 transition"
          >
            <i class="fas fa-chart-bar text-2xl text-green-400"></i>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-white mb-1">
              View Analytics
            </h3>
            <p class="text-sm text-gray-400">Track your sponsorship impact</p>
          </div>
          <i
            class="fas fa-arrow-right ml-auto text-gray-500 group-hover:text-green-400 transition"
          ></i>
        </a>
      </div>

      <!-- Sponsored Events Section -->
      <div
        class="mt-8 glass-card p-6 lg:p-8"
        data-aos="fade-up"
        data-aos-delay="800"
      >
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center gap-3">
            <div
              class="w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center"
            >
              <i class="fas fa-trophy text-white"></i>
            </div>
            <h2 class="text-xl font-semibold text-white font-space">
              My Sponsored Events
            </h2>
          </div>
          <a
            href="../events/sponsee.html"
            class="text-purple-400 hover:text-purple-300 text-sm transition"
          >
            View All <i class="fas fa-arrow-right ml-1"></i>
          </a>
        </div>

        <div
          id="sponsoredEvents"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
        >
          <!-- Empty state -->
          <div
            id="emptySponsored"
            class="col-span-full bg-white/5 rounded-xl p-6 border border-white/10"
          >
            <div class="flex flex-col items-center justify-center py-8">
              <i class="fas fa-trophy text-4xl text-gray-600 mb-4"></i>
              <p class="text-gray-400 text-lg text-center">
                You haven't sponsored any events yet.
              </p>
              <a
                href="../events/sponsee.html"
                class="mt-4 inline-flex items-center text-purple-400 hover:text-purple-300 transition"
              >
                <i class="fas fa-search mr-2"></i>Browse Events to Sponsor
              </a>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      AOS.init({ duration: 800, easing: "ease-out-cubic", once: true });

      // Check if user is logged in and is a sponsor
      document.addEventListener("DOMContentLoaded", function () {
        const token = localStorage.getItem("authToken");
        const userRole = localStorage.getItem("userRole");
        const userName = localStorage.getItem("userName");

        if (!token) {
          window.location.href = "../auth/login.html";
          return;
        }

        if (userRole !== "sponsor") {
          // Redirect sponsees to their dashboard
          window.location.href = "sponsee-dashboard.html";
          return;
        }

        // Update company name
        if (userName) {
          document.getElementById("companyName").textContent = userName;
        }

        // Load dashboard data
        loadDashboardData();
      });

      async function loadDashboardData() {
        // For now, we'll show placeholder data
        // This will be connected to real API endpoints when the backend is updated

        // Simulated data - replace with actual API calls
        const dashboardData = {
          activeSponshorships: 0,
          pendingRequests: 0,
          totalApproved: 0,
          totalInvested: 0,
          requests: [],
          activities: [],
          sponsoredEvents: [],
        };

        updateStats(dashboardData);
        updateRequests(dashboardData.requests);
        updateActivities(dashboardData.activities);
        updateSponsoredEvents(dashboardData.sponsoredEvents);
      }

      function updateStats(data) {
        document.getElementById("activeCount").textContent =
          data.activeSponshorships;
        document.getElementById("pendingCount").textContent =
          data.pendingRequests;
        document.getElementById("approvedCount").textContent =
          data.totalApproved;
        document.getElementById("totalInvested").textContent =
          "৳" + formatNumber(data.totalInvested);
      }

      function formatNumber(num) {
        if (num >= 10000000) {
          return (num / 10000000).toFixed(1) + "Cr";
        } else if (num >= 100000) {
          return (num / 100000).toFixed(1) + "L";
        } else if (num >= 1000) {
          return (num / 1000).toFixed(1) + "K";
        }
        return num.toString();
      }

      function updateRequests(requests) {
        const container = document.getElementById("requestsList");
        const emptyState = document.getElementById("emptyRequests");

        if (requests.length === 0) {
          emptyState.style.display = "block";
          document.getElementById("requestsCount").textContent = "0 requests";
          return;
        }

        emptyState.style.display = "none";
        document.getElementById("requestsCount").textContent =
          requests.length + " requests";

        container.innerHTML = requests
          .map(
            (request) => `
          <div class="request-card">
            <div class="flex items-start justify-between mb-3">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-orange-500 flex items-center justify-center text-white font-bold">
                  ${request.eventName.charAt(0)}
                </div>
                <div>
                  <h4 class="text-white font-medium">${request.eventName}</h4>
                  <p class="text-sm text-gray-400">${request.organizerName}</p>
                </div>
              </div>
              <span class="status-badge status-${request.status}">${
              request.status
            }</span>
            </div>
            <p class="text-gray-400 text-sm mb-3">${request.message}</p>
            <div class="flex items-center justify-between">
              <span class="text-purple-400 font-semibold">৳${formatNumber(
                request.amount
              )}</span>
              <div class="flex gap-2">
                <button onclick="viewRequest('${
                  request.id
                }')" class="px-3 py-1 text-sm bg-white/10 hover:bg-white/20 text-white rounded-lg transition">
                  View
                </button>
                ${
                  request.status === "pending"
                    ? `
                  <button onclick="approveRequest('${request.id}')" class="px-3 py-1 text-sm bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition">
                    Approve
                  </button>
                  <button onclick="rejectRequest('${request.id}')" class="px-3 py-1 text-sm bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition">
                    Reject
                  </button>
                `
                    : ""
                }
              </div>
            </div>
          </div>
        `
          )
          .join("");
      }

      function updateActivities(activities) {
        const container = document.getElementById("activityList");
        const emptyState = document.getElementById("emptyActivity");

        if (activities.length === 0) {
          emptyState.style.display = "block";
          return;
        }

        emptyState.style.display = "none";

        container.innerHTML = activities
          .map(
            (activity) => `
          <div class="flex items-center gap-4 p-3 rounded-lg bg-white/5 border border-white/10">
            <div class="w-10 h-10 rounded-full ${getActivityIconClass(
              activity.type
            )} flex items-center justify-center">
              <i class="fas ${getActivityIcon(
                activity.type
              )} text-white text-sm"></i>
            </div>
            <div class="flex-1">
              <p class="text-white text-sm">${activity.message}</p>
              <p class="text-gray-500 text-xs">${formatTimeAgo(
                activity.timestamp
              )}</p>
            </div>
          </div>
        `
          )
          .join("");
      }

      function updateSponsoredEvents(events) {
        const container = document.getElementById("sponsoredEvents");
        const emptyState = document.getElementById("emptySponsored");

        if (events.length === 0) {
          emptyState.style.display = "block";
          return;
        }

        emptyState.style.display = "none";

        container.innerHTML = events
          .map(
            (event) => `
          <div class="request-card">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 border border-green-500/30 flex items-center justify-center">
                <i class="fas fa-calendar text-green-400"></i>
              </div>
              <div>
                <h4 class="text-white font-medium">${event.name}</h4>
                <p class="text-sm text-gray-400">${event.date}</p>
              </div>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-green-400 font-semibold">৳${formatNumber(
                event.amount
              )}</span>
              <span class="status-badge status-approved">Active</span>
            </div>
          </div>
        `
          )
          .join("");
      }

      function getActivityIconClass(type) {
        const classes = {
          request: "bg-gradient-to-br from-yellow-500 to-orange-500",
          approved: "bg-gradient-to-br from-green-500 to-emerald-500",
          rejected: "bg-gradient-to-br from-red-500 to-rose-500",
          payment: "bg-gradient-to-br from-purple-500 to-violet-500",
          default: "bg-gradient-to-br from-gray-500 to-gray-600",
        };
        return classes[type] || classes.default;
      }

      function getActivityIcon(type) {
        const icons = {
          request: "fa-inbox",
          approved: "fa-check",
          rejected: "fa-times",
          payment: "fa-coins",
          default: "fa-bell",
        };
        return icons[type] || icons.default;
      }

      function formatTimeAgo(timestamp) {
        const now = new Date();
        const date = new Date(timestamp);
        const diff = Math.floor((now - date) / 1000);

        if (diff < 60) return "Just now";
        if (diff < 3600) return Math.floor(diff / 60) + " minutes ago";
        if (diff < 86400) return Math.floor(diff / 3600) + " hours ago";
        if (diff < 604800) return Math.floor(diff / 86400) + " days ago";
        return date.toLocaleDateString();
      }

      function viewRequest(id) {
        // TODO: Implement view request modal
        alert("View request feature coming soon!");
      }

      function approveRequest(id) {
        // TODO: Implement approve request
        alert("Approve request feature coming soon!");
      }

      function rejectRequest(id) {
        // TODO: Implement reject request
        alert("Reject request feature coming soon!");
      }

      function viewAnalytics() {
        // TODO: Implement analytics page
        alert("Analytics feature coming soon!");
      }
    </script>
    <script src="../../components/navbar.js"></script>
  </body>
</html>
